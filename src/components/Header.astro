---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import UserMenu from './UserMenu.vue';
---

<header class="navbar navbar-expand-lg sticky-top">
	<div class="container">
		<h2 class="navbar-brand">
			<a href="/"><i class="bi bi-terminal-fill"></i> {SITE_TITLE}</a>
		</h2>

		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarNav"
			aria-controls="navbarNav"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarNav">
			<div class="internal-links navbar-nav mx-auto mb-2 mb-lg-0">
				<HeaderLink href="/" class="nav-link">Home</HeaderLink>
				<HeaderLink href="/blog" class="nav-link">Blog</HeaderLink>
				<HeaderLink href="/about" class="nav-link">About</HeaderLink>
			</div>

			<div class="d-flex gap-2 align-items-center">
				<div class="auth-section">
					<UserMenu client:load />
				</div>

				<button
					class="theme-toggle"
					onclick="toggleCyberTheme()"
					aria-label="Toggle theme"
					title="Toggle between dark and light theme"
				>
					<i class="bi bi-moon-fill"></i>
					<span class="theme-text d-none d-md-inline">Dark</span>
				</button>

				<div class="social-links d-none d-lg-flex gap-2">
					<a
						href="https://m.webtoo.ls/@astro"
						target="_blank"
						class="btn btn-outline-primary btn-sm"
						aria-label="Follow on Mastodon"
					>
						<i class="bi bi-mastodon"></i>
					</a>
					<a
						href="https://twitter.com/astrodotbuild"
						target="_blank"
						class="btn btn-outline-primary btn-sm"
						aria-label="Follow on Twitter"
					>
						<i class="bi bi-twitter-x"></i>
					</a>
					<a
						href="https://github.com/withastro/astro"
						target="_blank"
						class="btn btn-outline-primary btn-sm"
						aria-label="View on GitHub"
					>
						<i class="bi bi-github"></i>
					</a>
				</div>
			</div>
		</div>
	</div>
</header>

<style>
	:root {
		--header-bg: var(--cyber-bg-primary);
	}

	header {
		margin: 0;
		padding: 0;
		background: var(--header-bg);
		border-bottom: 1px solid var(--cyber-border-color);
		backdrop-filter: blur(10px);
	}

	.navbar-brand a {
		font-size: 1.5rem;
		font-weight: 700;
		text-decoration: none;
		background: var(--cyber-gradient-primary);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	.navbar-brand a:hover {
		opacity: 0.8;
	}

	.navbar-toggler {
		border-color: var(--cyber-border-color);
	}

	.navbar-toggler:focus {
		box-shadow: 0 0 0 0.2rem var(--cyber-primary);
	}

	.internal-links a {
		padding: 0.5rem 1rem;
		color: var(--cyber-text-secondary);
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.internal-links a:hover,
	.internal-links a.active {
		color: var(--cyber-primary);
	}

	.auth-section {
		display: flex;
		align-items: center;
	}

	.social-links a {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 36px;
		height: 36px;
		padding: 0;
	}

	.social-links a:hover {
		color: var(--cyber-primary);
		border-color: var(--cyber-primary);
	}

	@media (max-width: 991px) {
		#navbarNav {
			background: var(--cyber-bg-secondary);
			padding: 1rem;
			border-radius: 12px;
			margin-top: 1rem;
		}

		.internal-links {
			margin-bottom: 1rem !important;
		}

		.internal-links a {
			padding: 0.75rem 1rem;
		}
	}
</style>
